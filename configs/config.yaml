# Application name
appname: "claims-api"

# Tracing configuration (OpenTelemetry)
trace:
  enabled: false  # Enable/disable distributed tracing
  processor:
    type: "otlp-grpc"  # Export format: otlp-grpc or otlp-http
    options:
      host: "localhost:4317"  # OpenTelemetry collector endpoint
  sampler:
    type: always-on  # Sampling strategy: always-on, always-off, parent-based-trace-id-ratio
    options:
      ratio: 0.1  # Sample 10% of traces (if using ratio sampler)

# Cache configuration (Redis + Local)
cache:
  # Redis settings
  redisserver: "10.20.30.33:6379"
  redispassword: ""
  redisdbindex: 1
  redisexpirationtime: 20m

  # Local cache settings
  lccapacity: 10000              # Maximum number of entries
  lcnumshards: 20                # Number of shards for concurrent access
  lcttl: 2m                      # Time to live for cache entries
  lcevictionpercentage: 10       # Percentage to evict when full
  lcminrefreshdelay: 15m         # Minimum delay before refresh
  lcmaxrefreshdelay: 30m         # Maximum delay before refresh
  lcretrybasedelay: 1s           # Base delay for retries
  lcbatchsize: 10                # Batch size for operations
  lcbatchbuffertimeout: 30s      # Batch buffer timeout

  # Enable/disable cache layers
  isredisenabled: true
  islocalcacheenabled: false

# Database configuration (PostgreSQL)
db:
  username: "postgres"
  password: "your-password"
  host: "localhost"
  port: "5432"
  database: "claims_db"
  schema: "public"

  # Connection pool settings
  maxconns: 10                # Maximum connections
  minconns: 1                 # Minimum connections
  maxconnlifetime: 30         # Max connection lifetime (minutes)
  maxconnidletime: 10         # Max idle time (minutes)
  healthcheckperiod: 5        # Health check interval (minutes)

  # Query timeouts
  QueryTimeoutLow: 2s         # Simple queries
  QueryTimeoutMed: 5s         # Complex queries/aggregations

# Application info (for Swagger)
info:
  name: "claims-api"
  version: "1.0.0"

# Batch job configuration
batch:
  # Maturity intimation job settings
  maturity_intimation:
    enabled: true                           # Enable/disable batch job
    schedule: "0 0 9 * * *"                 # Cron schedule (daily at 9:00 AM)
    days_in_advance: 60                      # Days before maturity to send intimation (BR-CLM-MC-002)
    batch_size: 100                          # Number of policies to process per batch
    notification_channels:                   # Notification channels to use
      - "SMS"
      - "EMAIL"
      # - "WHATSAPP"                        # Optional: Enable WhatsApp notifications

# External API clients configuration
api_clients:
  # CBS (Core Banking System) API configuration
  # Reference: INT-CLM-016 (CBS API Integration)
  cbs:
    enabled: true                            # Enable/disable CBS API integration
    base_url: "https://cbs-api.pli.gov.in/api/v1"  # CBS API base URL
    api_key: ""                              # CBS API key (load from environment variable)
    timeout: 30                              # Request timeout in seconds
    retry_attempts: 3                        # Number of retry attempts for failed requests
    retry_delay: 1                           # Delay between retries in seconds

  # PFMS (Public Financial Management System) API configuration
  # Reference: INT-CLM-017 (PFMS API Integration)
  pfms:
    enabled: true                            # Enable/disable PFMS API integration
    base_url: "https://pfms.gov.in/api/v1"   # PFMS API base URL
    api_key: ""                              # PFMS API key (load from environment variable)
    timeout: 30                              # Request timeout in seconds
    retry_attempts: 3                        # Number of retry attempts for failed requests
    retry_delay: 1                           # Delay between retries in seconds

  # ECMS (Enterprise Content Management System) configuration
  # Reference: INT-CLM-001 (ECMS Integration)
  ecms:
    enabled: true                            # Enable/disable ECMS integration
    base_url: "https://ecms.pli.gov.in/api"  # ECMS API base URL
    api_key: ""                              # ECMS API key
    timeout: 20                              # Request timeout in seconds

  # Policy Service configuration
  # Reference: INT-CLM-002 (Policy Service Integration)
  policy_service:
    enabled: true
    base_url: "https://policy-service.pli.gov.in"
    timeout: 10

  # Customer Service configuration
  # Reference: INT-CLM-003 (Customer Service Integration)
  customer_service:
    enabled: true
    base_url: "https://customer-service.pli.gov.in"
    timeout: 10

  # Notification Service configuration
  # Reference: INT-CLM-009 (Email), INT-CLM-011 (WhatsApp)
  notification_service:
    enabled: true
    base_url: "https://notification-service.pli.gov.in"
    timeout: 15
    # Notification channels
    sms_enabled: true
    email_enabled: true
    whatsapp_enabled: false                  # Set to true to enable WhatsApp notifications
